# Uirapuru First Light

## Description

Characterization and calibration of Uirapuru Radio Telescope and Sky observations.

## Measurement Protocol

:::{figure} ../../00_images/antenna_signal_chain.png
:label: diagrama

Diagrama
:::

:::{admonition} Calibration
:class: important

1. Check Uirapuru Pointing
1. $15$ min measurements with calibration unit switching modes **Hot**, **Warm** e **Cold**. Horn cable to $A1$ and $RF_{out}$ connected in receiver [see diagram](#setup).
2. Repeat procedure for the other polarization.
3. Now connect end of receiver chain to $A1$ and $RF_{out}$ to Callisto; connect Skarab to other polarization and measure for 24 hours.
4. Switch polarizations and repeat the measurement.
5. Remove filters and choose a frequency band with Neutral Hydrogen. Measure for at least 6 hours, and make sure to have the galactic plane as close as possible to beam. Keeping the same setup as before.
6. Measure the filter Attenuation (in both bands)
:::

:::{admonition} Steps to be taken prior to measurements
:class: error

- Set raspberry with appropriate image to control Callisto and Clibration Unit
- Power cable to receiver cabin.
- Ethernet cable to receiver cabin.
- Reliable raspberry pi power source.
- Define HDF5 format.
- Implement HDF5 output in the Skarab as post-processing.
- Check callisto and calibration unit functioning.
- Skarab output: dB or linear?
:::

:::{admonition} Analysis

- Read HDF5 data to xarray dataset.
- Apply `coarsen` in frequency to get comparable measurements between callisto and skarab (`n=[100, 200, 400]`)
- Consider the effect of resampling to $1 \mathrm{min}$ and $5 \mathrm{min}$
- Apply Hampel filtering to get smooth baseline. (window size between $\mathrm{bandwidth}/4$ and $\mathrm{bandwidth}/3$)

- With Callisto measurements determine:

$$
\begin{aligned}
{V_0}_\nu &\mapsto \textrm{Voltage Offset per frequency}\\
b_\nu &\mapsto \textrm{Detector Slope per frequency}\\
{T_{RX}}_\nu &\mapsto \textrm{Receiver Temperature per frequency}\\
\end{aligned}
$$

- First order calibrated measure is:

$$
S_\nu  = \frac{2k_B \nu^2}{c^2} \frac{4\pi}{G_\nu}\left[10^{\frac{V_\nu - {V_0}_\nu}{b_\nu}}\; \mathrm{K} - {T_{RX}}_\nu\right]
$$

- Antenna Directivity is obtained from measured beam pattern with interpolation. Gain is obtained by multiplying by $\eta$ factor, which encodes the effective area of the beam and if determined with sky calibration.

$$
D = \frac{B(\theta, \phi)_\mathrm{max}}{\frac{1}{4\pi}\iint B(\theta, \phi)d\Omega}\\
G = \eta D
$$

- Calibrações Astronômicas
  - Obter dados com passagem do sol.
  - Obter dados de fluxo solar da efeméride
  - Aplicar índice espectral
  - COnsiderar Sol como fonte pontual:

$$
T_A = \frac{\Omega_\odot}{\Omega_A}T_{\odot}
$$

- Emissão Galáctica.
  - Determinar medidas com detecção de hidrogênio neutro
  - Realizar calibração dos dados
  - Comparar fluxo com subtração de baseline com dados de catálogo na efeméride.

- Observações de Satélites GNSS
  - Separar dados com passagens de satélites.
  - Efetuar calibração completa.
  - Subtração de baseline
  - Comparação com dados RINEX.

:::

:::{admonition} 3-point calibration
:class: error

Aplicável para medidas lineares vindas de um detector logarítmico, assumindo que $T_\mathrm{hot} \gg T_\mathrm{cold} \sim T_\mathrm{RX}$

$$
T_\mathrm{cold} = 290 K\\
T_\mathrm{warm} = 94868 K\\
T_\mathrm{cold} = 948683 K\\
$$

$$
\begin{aligned}
V_\mathrm{cold} &= V_0 + b \log (T_\mathrm{RX} + T_\mathrm{cold})\\
V_\mathrm{warm} &= V_0 + b \log (T_\mathrm{warm})\\
V_\mathrm{hot} &= V_0 + b \log (T_\mathrm{hot})
\end{aligned}
$$

$$
\begin{aligned}
b &= \frac{V_\mathrm{hot} - V_\mathrm{warm}}{\log \frac{T_\mathrm{hot}}{T_\mathrm{warm}}}\\
V_0 &= \frac{V_\mathrm{warm} \log T_\mathrm{hot} - V_\mathrm{hot} \log T_\mathrm{warm}}{\log \frac{T_\mathrm{hot}}{T_\mathrm{warm}}}\\
T_\mathrm{RX} &= 10^\frac{V_\mathrm{cold} - V_0}{b} - T_\mathrm{cold}
\end{aligned}
$$
:::
